<!DOCTYPE html>
<html>
<head>
<style>
@import url('https://fonts.googleapis.com/css?family=Libre+Baskerville&display=swap');
</style>
	<link rel="icon" href="https://i.imgur.com/UGHyZNg.png">
	<a href="../index.html"><img src="/favicon.ico" id="explore" width=20px height=20px></a>
	<title>Questlog</title>
	<link rel = "stylesheet" href = "qstyle.css">
	<meta charset="utf-8">
    <meta http-equiv="refresh" content="3600">
    <meta name="description" content= "Welcome to Questlog, the blog/writing component of Explore HQ. This is basically a place for me to record thoughts and little pieces of my life, as well as a developer journal of sorts for the other projects and my various endeavors with the creative arts and navigating this very, very large world.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<div id="nav">
		<a href='index.html' id="current">Main</a>
		<a href='about.html'>About</a>
	</div>
	<a href="/questlog"><a href="/questlog"><img src="https://i.imgur.com/qrcuFKo.png" id="logo" width=228px height=125px></img></a></a>
	<div class="posts" id="posts-container"></div>

	<script>
		async function loadPosts() {
			const res = await fetch('posts/index.json');
			const posts = await res.json();

			const container = document.getElementById('posts-container');
			container.innerHTML = '';

			const postsPerRow = 3;
			for (let i = 0; i < posts.length; i += postsPerRow) {
			  const rowDiv = document.createElement('div');
			  rowDiv.className = 'postrow';

			  posts.slice(i, i + postsPerRow).forEach(post => {
			    const postDiv = document.createElement('div');
			    postDiv.className = 'post';
			    postDiv.innerHTML = `
			      <p>${post.date}</p>
			      <h1>${post.title}</h1>
			      <p>${post.excerpt}</p>
			      <a href="post.html?post=${post.id}">read more</a>
			    `;
			    rowDiv.appendChild(postDiv);
			  });

			  container.appendChild(rowDiv);
			}
		}
		
		loadPosts();
	</script>
</body>
</html>
